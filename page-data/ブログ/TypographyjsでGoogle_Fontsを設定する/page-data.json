{"componentChunkName":"component---src-templates-blog-post-js","path":"/ブログ/TypographyjsでGoogle_Fontsを設定する/","result":{"data":{"site":{"siteMetadata":{"title":"悪魔のオコトバ"}},"markdownRemark":{"id":"9df22bdb-f2b7-522a-b6fd-84aeec4c1580","excerpt":"ブログのフォントを変えようと思い調べてみると、gatsby-starter-blogではgatsby-plugin-typographyというプラグインが使われているようです。   Typography.js gatsby-plugin-typografyはTypography.jsのGatsbyJS…","html":"<p>ブログのフォントを変えようと思い調べてみると、<a href=\"https://www.gatsbyjs.org/starters/gatsbyjs/gatsby-starter-blog/\">gatsby-starter-blog</a>では<a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typography/\">gatsby-plugin-typography</a>というプラグインが使われているようです。  </p>\n<h2>Typography.js</h2>\n<p>gatsby-plugin-typografyは<a href=\"https://kyleamathews.github.io/typography.js/\">Typography.js</a>のGatsbyJS用プラグインです。<br>\nタイポグラフィとは文字のフォントや構成を整える技術のようですね。要するに文字周りを綺麗に整えてくれるライブラリです。  </p>\n<h3>設定ファイル</h3>\n<p>gatsby-starter-blogでは<code class=\"language-text\">/src/utils/typography.js</code>が設定ファイルです。</p>\n<p><em>typography.js</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> Wordpress2016 <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-wordpress-2016\"</span>\n\nWordpress2016<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">overrideThemeStyles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"a.gatsby-resp-image-link\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      boxShadow<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">none</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">delete</span> Wordpress2016<span class=\"token punctuation\">.</span>googleFonts\n\n<span class=\"token keyword\">const</span> typography <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Typography</span><span class=\"token punctuation\">(</span>Wordpress2016<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Hot reload typography in development.</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">production</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  typography<span class=\"token punctuation\">.</span><span class=\"token function\">injectStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> typography\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> rhythm <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">.</span>rhythm\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> scale <span class=\"token operator\">=</span> typography<span class=\"token punctuation\">.</span>scale</code></pre></div>\n<p>あらかじめWordpress2016というテーマが設定されているようです。テーマは変えずに必要な部分だけを設定します。  </p>\n<h3>フォントを変える</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Typography <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography\"</span>\n<span class=\"token keyword\">import</span> Wordpress2016 <span class=\"token keyword\">from</span> <span class=\"token string\">\"typography-theme-wordpress-2016\"</span>\n\nWordpress2016<span class=\"token punctuation\">.</span>headerFontFamily <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'M PLUS 1p'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Roboto'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'serif'</span><span class=\"token punctuation\">]</span>\nWordpress2016<span class=\"token punctuation\">.</span>bodyFontFamily <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'M PLUS 1p'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Roboto'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'serif'</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">delete</span> Wordpress2016<span class=\"token punctuation\">.</span>googleFonts\nWordpress2016<span class=\"token punctuation\">.</span>googleFonts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'M PLUS 1p'</span><span class=\"token punctuation\">,</span>\n    styles<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'400'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Kosugi Maru'</span><span class=\"token punctuation\">,</span>\n    styles<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">.headerFontFamily</code>でヘッダーのフォントを設定できます。<br>\n<code class=\"language-text\">.bodyFontFamily</code>でボディのフォントを設定できます。<br>\n<code class=\"language-text\">.googleFonts</code>で使用する<a href=\"https://fonts.google.com/\">Google Fonts</a>のフォントとスタイルを指定します。  </p>\n<h3>h1だけフォントが変更されない</h3>\n<p>よしこれで完成、と思いきや見出し<code class=\"language-text\">h1</code>だけフォントが変更されません。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ae0f96d67c8d720bffbcca442a83997/f6386/h1fontnotchanged.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.94594594594594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACKElEQVQ4y51TW47aQBDkeJyBmyDuwAW4AeKHDyTERzZIQZGSDxIeVoDFLGAb26yN32+7Mt1AlJCNlKSldveMZso1UzW1siwhSRIOhwM2mw0sy4LrukjTFLZtIwgCRFHElSKOY5imiXtUVYWfo1YUBRqNBprNJur1OlqtFjqdDnq9HtrtNhaLBbrdLvr9PmazGYbDIUaj0Q+wx6wRw6endxiPxxgMBphMJliv1zgej9A0DYZhYD6fQ1VVZna5XJg57XsravjPIEA6XZ4XXClpjgGH779iJu1wNg3BRIOu68yOWBIz6okdsaXx6XTiez6fz7CtV+hiTGvo3hmQjuF7HgMRyHK5xG6346OuVisGIkA6qizL2O/3UBQFpgBUTQeqYQkMm1nW7ioRXd/3kSQJ/52SesogCJFmGStMitMcrc3yHJdI7EuqX++wLKvf5P+3qFDeVf4rAarrhkeQN1XOigpLNYQk8uU1xkaP8Gxcc6kE+LT1OKn/LHv4+Oziy97Hh7W4u0sCxU5gehmvZ4ZpXuKbFkA2Q+hOCt3NcbRzvFgZJC2CHZbMRfwXmbBeKpqsoHqdK29Z3GzJxnaFQqahw3Md5FkqqiuE8FEWOUJRYyEEiRGFgbBGgkxkEkcsUpLEwos5z7MPM6GeLO9wFDbYbmV+09PpVDyzORThOXo1ZBXyHvnOcRx4wmJkIbIbjQmY5gi4Rh8aEHAYhmxOsgX1lNnNLn96ao/xHQkNJ2NcvMnkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"見出しだけ変更されない\"\n        title=\"見出しだけ変更されない\"\n        src=\"/static/4ae0f96d67c8d720bffbcca442a83997/fcda8/h1fontnotchanged.png\"\n        srcset=\"/static/4ae0f96d67c8d720bffbcca442a83997/12f09/h1fontnotchanged.png 148w,\n/static/4ae0f96d67c8d720bffbcca442a83997/e4a3f/h1fontnotchanged.png 295w,\n/static/4ae0f96d67c8d720bffbcca442a83997/fcda8/h1fontnotchanged.png 590w,\n/static/4ae0f96d67c8d720bffbcca442a83997/f6386/h1fontnotchanged.png 686w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>ソースを見てみると、Wordpress2016テーマの中で<code class=\"language-text\">h1</code>を含む一部の要素に対しスタイルが個別で設定されており、そちらが優先されているようです。  </p>\n<p><em>/node_modules/typography-theme-wordpress-2016/dist/index.js</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function-variable function\">overrideStyles</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">overrideStyles</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_ref<span class=\"token punctuation\">,</span> options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> _ref2<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> adjustFontSizeTo <span class=\"token operator\">=</span> _ref<span class=\"token punctuation\">.</span>adjustFontSizeTo<span class=\"token punctuation\">,</span>\n        scale <span class=\"token operator\">=</span> _ref<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">,</span>\n        rhythm <span class=\"token operator\">=</span> _ref<span class=\"token punctuation\">.</span>rhythm<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> _ref2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      h1<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        fontFamily<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Montserrat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sans-serif\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      blockquote<span class=\"token operator\">:</span> <span class=\"token function\">_extends</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        color<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> _grayPercentage2<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">41</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        fontStyle<span class=\"token operator\">:</span> <span class=\"token string\">\"italic\"</span><span class=\"token punctuation\">,</span>\n        paddingLeft<span class=\"token operator\">:</span> <span class=\"token function\">rhythm</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span> <span class=\"token operator\">/</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        marginLeft<span class=\"token operator\">:</span> <span class=\"token function\">rhythm</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        borderLeft<span class=\"token operator\">:</span> <span class=\"token function\">rhythm</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span> <span class=\"token operator\">/</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" solid \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> _grayPercentage2<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n      （省略）</code></pre></div>\n<p>なのでこれを設定してあげましょう。  </p>\n<p><em>typography.js</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Wordpress2016<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">overrideThemeStyles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"a.gatsby-resp-image-link\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      boxShadow<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">none</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    h1<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      fontFamily<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Kosugi Maru\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Roboto\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"serif\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e4a42c9b129791934f9fc7f5a9b5e2d/7de01/h1fontchanged.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABV0lEQVQoz51SbWrDMAzttXuFXqOn6J8eoFAoFDZYMko/kjjfaeI4TuLkzVKXQUfHtgoekiXZkp48g5Xz+QzHcVhXVYXr9Yq6riGlhNYaRVHAGEOpGMfxIabYjIzlcon5fI7FYoH1eo3VaoXtdovNZsOFdrsduq7724O3w4hhMOj7/u7Sf2TK5w7fDgIvjoeqLBBFEbIsYx2GISOOY6Rp+nUmWnKbk6YJn8uyvB85TjJcPGGDAsfjkcd0XRf7/R6e50EIwQ+eTieO+76HQIQQcW7vRJZv+X3km1Bl1TTcIVVtrE3LIV9rOaQ4+Ui3/YBEGnTDg5HxyeNz8mApnblB23K6M1CtQWNBNqHWBpLRc2fT0oaftiwKDVdUOEQKXt7BL3pcrCY7rnq8RxqvvoIbNsiV+X3LmSU8CALmjjhKk4R9UlaoLZSqoRuFViteAPFLoI8/8To9+gFQDwJb6xTiJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"フォント変更完了\"\n        title=\"フォント変更完了\"\n        src=\"/static/8e4a42c9b129791934f9fc7f5a9b5e2d/fcda8/h1fontchanged.png\"\n        srcset=\"/static/8e4a42c9b129791934f9fc7f5a9b5e2d/12f09/h1fontchanged.png 148w,\n/static/8e4a42c9b129791934f9fc7f5a9b5e2d/e4a3f/h1fontchanged.png 295w,\n/static/8e4a42c9b129791934f9fc7f5a9b5e2d/fcda8/h1fontchanged.png 590w,\n/static/8e4a42c9b129791934f9fc7f5a9b5e2d/7de01/h1fontchanged.png 794w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>これで<code class=\"language-text\">h1</code>に対してフォントを適用できました。（同時に別の箇所でfont-sizeも変えたのでちょっと文字が小さくなってます）</p>","frontmatter":{"title":"TypographyjsでGoogle Fontsを設定する","date":"June 03, 2020","description":"gatsby-starter-blogで使用されているgatsby-plugin-typographyでGoogle Fontsのフォントを設定する。","category":"ブログ"}}},"pageContext":{"slug":"/ブログ/TypographyjsでGoogle_Fontsを設定する/","previous":{"fields":{"slug":"/ブログ/[gatsby-starter-blog]_記事下部の前後の記事へのリンクをカテゴリーごとに分ける/"},"frontmatter":{"title":"[gatsby-starter-blog] 記事下部の前後の記事へのリンクをカテゴリーごとに分ける","category":"ブログ"}},"next":{"fields":{"slug":"/ブログ/GatsbyJSのソースをpushしたら自動でビルドしてGithub Pagesにデプロイする/"},"frontmatter":{"title":"GatsbyJSのソースをPushしたら自動でビルドしてGithub Pagesにデプロイする","category":"ブログ"}}}}}